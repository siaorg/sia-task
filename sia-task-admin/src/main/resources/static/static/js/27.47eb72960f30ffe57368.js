webpackJsonp([27],{"++iZ":function(a,e,t){"use strict";function s(a){t("8Exm")}Object.defineProperty(e,"__esModule",{value:!0});var i=t("6n5e"),o=t("JMwf"),l=t("VU/8"),r=s,n=l(i.a,o.a,!1,r,null,null);e.default=n.exports},"6n5e":function(a,e,t){"use strict";var s=t("PJh5");t.n(s);e.a={name:"AddJobTmpl",props:["addTaskTagValue"],data:function(){var a=function(a,e,t){switch(a.field){case"taskParamsValue":if(""!==e.replace(/(^\s*)|(\s*$)/g,"")&&!new RegExp(/^[^]{1,255}$/).test(e))return t(new Error("输入内容必须是1到255个字符!"));break;case"readTimeout":if(""!==e&&!new RegExp(/^[1-9]{1}[0-9]{0,}$/).test(e))return t(new Error("输入内容必须是大于1的数字!"))}t()};return{showParamsCount:!0,ipDataList:[],taskParamsTypeList:["FROM_UI","FROM_TASK"],taskSelectCaseList:["随机","固定IP"],tasktransferFailList:["STOP","IGNORE","MULTI_CALLS_TRANSFER","TRANSFER"],taskParamsValue:"",taskCreateViewModel:{taskParamsType:"",taskParamsValue:"",readTimeout:"30",taskSelectCase:"",ipSelectTag:"",tasktransferFail:"STOP"},jobAddViewModelRules:{taskParamsType:[this.$validator.required("请输入Task_参数类型")],taskParamsValue:[this.$validator.required("请输入Task_参数值"),{validator:a,trigger:"blur"}],readTimeout:[{validator:a,trigger:"blur"}],taskSelectCase:[this.$validator.required("请选择Task_选取实例策略")],tasktransferFail:[this.$validator.required("请选择Task_调用失败策略")],ipSelectTag:[this.$validator.required("请选择实例信息")]},preTaskKeyArr:[]}},created:function(){this.getIpPortList(),this.getPreTaskKey(),this.showParamsCount=this.addTaskTagValue.taskListTag[this.addTaskTagValue.valTaget.taskKey].paramCount},methods:{getPreTaskKey:function(){var a=this,e=this,t=[];this.addTaskTagValue.valTaget.preTaskKey instanceof Array&&this.addTaskTagValue.valTaget.preTaskKey.forEach(function(e){t.push(a.addTaskTagValue.taskIdObj[e])}),this.preTaskKeyArr=t,e.taskCreateViewModel.taskKey=e.addTaskTagValue.valTaget.taskKey,e.taskCreateViewModel.taskParamsType=e.addTaskTagValue.valTaget.inputType||"",e.taskCreateViewModel.readTimeout=e.addTaskTagValue.valTaget.readTimeout?e.addTaskTagValue.valTaget.readTimeout:null===e.addTaskTagValue.valTaget.readTimeout?e.addTaskTagValue.valTaget.readTimeout:"30",e.taskCreateViewModel.taskParamsValue=e.addTaskTagValue.valTaget.inputValue||"",e.taskCreateViewModel.taskSelectCase=void 0!==e.addTaskTagValue.valTaget.routeStrategy?"ROUTE_TYPE_RANDOM"===e.addTaskTagValue.valTaget.routeStrategy?"随机":"ROUTE_TYPE_SHARDING"===e.addTaskTagValue.valTaget.routeStrategy?"分片":"固定IP":"",e.taskCreateViewModel.ipSelectTag=e.addTaskTagValue.valTaget.fixIp||"",e.taskCreateViewModel.tasktransferFail=e.addTaskTagValue.valTaget.failover||"STOP",e.taskCreateViewModel.preTaskKey=e.addTaskTagValue.valTaget.preTaskKey||"",e.taskCreateViewModel.taskId=e.addTaskTagValue.valTaget.taskId},getIpPortList:function(){var a=this,e=this,t={taskKey:e.addTaskTagValue.valTaget.taskKey,taskSource:this.addTaskTagValue.taskListTag[this.addTaskTagValue.valTaget.taskKey].taskSource||"",taskGroupName:this.addTaskTagValue.taskListTag[this.addTaskTagValue.valTaget.taskKey].taskGroupName||"",taskAppName:this.addTaskTagValue.taskListTag[this.addTaskTagValue.valTaget.taskKey].taskAppName||"",ipSelectTag:e.addTaskTagValue.valTaget.fixIp||"",taskId:this.addTaskTagValue.taskListTag[this.addTaskTagValue.valTaget.taskKey].taskId||""};e.$http.post(e.$api.getApiAddress("/taskapi/getExecutorList","CESHI_API_HOST"),t).then(function(t){0===t.data.code?a.ipDataList=""!==t.data.data&&null!==t.data.data?t.data.data.split(","):[]:e.$message({message:t.data.message,type:"error"})}).catch(function(){e.$message({message:"IpPort获取失败!",type:"error"})})},changeInputValue:function(a){},showHiddenAddJob:function(a){var e=this;if(1===a)this.$emit("showHiddenAddtask",a,{},!1);else{var t=this.taskCreateViewModel;this.$refs.taskAddConfigViewForm.validate(function(s){s&&e.$emit("showHiddenAddtask",a,t,!1)})}},showHiddenSave:function(){}}}},"8Exm":function(a,e,t){var s=t("vbL1");"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);t("rjj0")("6edae904",s,!0,{})},JMwf:function(a,e,t){"use strict";var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"mask-add-task-config",attrs:{id:"mask"}},[t("div",{staticClass:"mask-content",attrs:{id:"mask-content"}},[t("div",{staticClass:"mask-main-title"},[t("span",[a._v(a._s(a.addTaskTagValue.valTaget.taskKey)+" 参数配置")]),a._v(" "),t("i",{staticClass:"close-icon",on:{click:function(e){return a.showHiddenAddJob(1)}}})]),a._v(" "),t("div",{staticClass:"info scroll-bar"},[t("el-form",{ref:"taskAddConfigViewForm",staticClass:"taskAddConfigViewForm",attrs:{model:a.taskCreateViewModel,rules:a.jobAddViewModelRules,"label-width":"165px","auto-complete":"off"}},[a.showParamsCount?t("el-form-item",{attrs:{label:"Task_参数类型",prop:"taskParamsType"}},[t("el-select",{attrs:{placeholder:"Task_参数类型"},model:{value:a.taskCreateViewModel.taskParamsType,callback:function(e){a.$set(a.taskCreateViewModel,"taskParamsType",e)},expression:"taskCreateViewModel.taskParamsType"}},a._l(a.taskParamsTypeList,function(a,e){return t("el-option",{key:e,attrs:{label:a,value:a}})}),1),a._v(" "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[a._v("\n                  选择Task参数类型 "),t("br"),a._v("\n                  FROM_UI（来自前端，需要输入Task能解析的JSON串）； "),t("br"),a._v("\n                  FROM_TASK（来自任务，需要配置参数来源的任务）\n                ")]),a._v(" "),t("span",{staticClass:"el-icon-question info-icon"})])],1):a._e(),a._v(" "),a.showParamsCount?t("el-form-item",{attrs:{label:"Task_参数值"}},["FROM_TASK"!==a.taskCreateViewModel.taskParamsType?t("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请填写Task参数"},model:{value:a.taskCreateViewModel.taskParamsValue,callback:function(e){a.$set(a.taskCreateViewModel,"taskParamsValue",e)},expression:"taskCreateViewModel.taskParamsValue"}}):a._e(),a._v(" "),"FROM_TASK"===a.taskCreateViewModel.taskParamsType?t("el-select",{attrs:{placeholder:"请选择Task参数"},model:{value:a.taskCreateViewModel.taskParamsValue,callback:function(e){a.$set(a.taskCreateViewModel,"taskParamsValue",e)},expression:"taskCreateViewModel.taskParamsValue"}},a._l(a.preTaskKeyArr,function(a,e){return t("el-option",{key:e,attrs:{label:a,value:a}})}),1):a._e(),a._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Task参数类型为来自前端，输入Task能解析的JSON串（最多255字符）",placement:"top"}},[t("span",{staticClass:"el-icon-question info-icon"})])],1):a._e(),a._v(" "),t("el-form-item",{attrs:{label:"过期时间(s)",prop:"readTimeout"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,"uto-complete":"off",placeholder:"请输入过期时间"},model:{value:a.taskCreateViewModel.readTimeout,callback:function(e){a.$set(a.taskCreateViewModel,"readTimeout",e)},expression:"taskCreateViewModel.readTimeout"}}),a._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Job任务的过期时间",placement:"top"}},[t("span",{staticClass:"el-icon-question info-icon"})])],1),a._v(" "),t("el-form-item",{attrs:{label:"Task_选取实例策略",prop:"taskSelectCase",required:""}},[t("el-select",{attrs:{placeholder:"Task_选取实例策略"},model:{value:a.taskCreateViewModel.taskSelectCase,callback:function(e){a.$set(a.taskCreateViewModel,"taskSelectCase",e)},expression:"taskCreateViewModel.taskSelectCase"}},a._l(a.taskSelectCaseList,function(a,e){return t("el-option",{key:e,attrs:{label:a,value:a}})}),1),a._v(" "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[a._v("\n                  选取实例策略： "),t("br"),a._v("\n                  随机（从可选的列表中，随机选择实例，即IP+端口）； "),t("br"),a._v("\n                  固定IP（指定实例，随后需要从可选列表中人工指定实例）\n                ")]),a._v(" "),t("span",{staticClass:"el-icon-question info-icon"})])],1),a._v(" "),"固定IP"===a.taskCreateViewModel.taskSelectCase?t("el-form-item",{attrs:{label:"选取实例",prop:"ipSelectTag",required:""}},[t("el-select",{attrs:{placeholder:"选取实例"},model:{value:a.taskCreateViewModel.ipSelectTag,callback:function(e){a.$set(a.taskCreateViewModel,"ipSelectTag",e)},expression:"taskCreateViewModel.ipSelectTag"}},a._l(a.ipDataList,function(a,e){return t("el-option",{key:e,attrs:{label:a,value:a}})}),1),a._v(" "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[a._v("选择相应的实例")]),a._v(" "),t("span",{staticClass:"el-icon-question info-icon"})])],1):a._e(),a._v(" "),t("el-form-item",{attrs:{label:"Task_调用失败策略",prop:"tasktransferFail",required:""}},[t("el-select",{attrs:{placeholder:"请选择Task_调用失败策略"},model:{value:a.taskCreateViewModel.tasktransferFail,callback:function(e){a.$set(a.taskCreateViewModel,"tasktransferFail",e)},expression:"taskCreateViewModel.tasktransferFail"}},a._l(a.tasktransferFailList,function(a,e){return t("el-option",{key:e,attrs:{label:a,value:a}})}),1),a._v(" "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[a._v("\n                  调用失败策略: "),t("br"),a._v("\n                  STOP（停止策略，调用失败则整个Job停止，不再执行后续Task）； "),t("br"),a._v("\n                  IGNORE（忽略策略，调用失败则跳过该Task，继续执行后续Task）； "),t("br"),a._v("\n                  TRANSFER（转移策略，选取该Task的其他实例执行，如果依然失败，则使用停止策略）； "),t("br"),a._v("\n                  MULTI_CALLS_TRANSFER（多次调用再转移策略，重复调用该Task多次，如果依然失败，则使用转移策略）\n                ")]),a._v(" "),t("span",{staticClass:"el-icon-question info-icon"})])],1)],1),a._v(" "),t("div",{staticClass:"alert-button"},[t("el-button",{on:{click:function(e){return a.showHiddenAddJob(1)}}},[a._v("取消")]),a._v(" "),t("el-button",{on:{click:function(e){return a.showHiddenAddJob(2)}}},[a._v("添加")])],1)],1)])])},i=[],o={render:s,staticRenderFns:i};e.a=o},bE5C:function(a,e){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAAU9JREFUSMetkkuuAVEQhjGxARNLEe+Y0xEkQuikMROJBQgShMRyLIBlGImhoSbxrLqDv/sm3be4up2afOmc0+f765wKMDExLZfMzMyHA6jrAcWFcwcDcL8Hq1VrYbdjRz2foGGoEc/nLNZqZW3QNPB+l4N4vxHc7GIhi00TjMVcP5RKL4MQE1Oj8VnHk4ksPp/BbPaf5OWyHOTxwHq9Lv83nfoWy51UKr9idxBmZq7VwNlMmVgOouvOmbCL6I+TmJhOJ3yk077FchDDeCl2dJzJfHpuyFuMSAQMBuX1cBiMRhV3Phq979h9I7cbWCyqF9tvTExMqRTYaskzYgfRNI/i8djrcGG93X5/I4WCcrG3INcrmM+7xMOh/MamiQMTCX9P2O3KQS4XMJezNh6PsjiZ9D1EjiC9nhxks7E29Pvgeg3G49+K5SCdDrjdgs3mD9vTybFFj2NhAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAzLTA0VDE1OjQyOjQwKzA4OjAw1ocA7gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMy0wNFQxNTo0Mjo0MCswODowMKfauFIAAABNdEVYdHN2ZzpiYXNlLXVyaQBmaWxlOi8vL2hvbWUvYWRtaW4vaWNvbi1mb250L3RtcC9pY29uX2RodDVmMmo0c212L3ppeXVhbmxkcGkuc3Znh2M/1AAAAABJRU5ErkJggg=="},"uSs+":function(a,e,t){a.exports=t.p+"static/img/mark-bg.b868281.png"},vbL1:function(a,e,t){var s=t("kxFB");e=a.exports=t("FZ+f")(!1),e.push([a.i,".mask-add-task-config{z-index:2000;background-color:rgba(17,37,90,.43);top:0;left:0;width:100%;height:100%;position:fixed}.mask-add-task-config .mask-content{width:630px;margin:0 auto;position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);background:#fff url("+s(t("uSs+"))+") no-repeat center 120px;-webkit-box-shadow:1px 1px 50px rgba(0,0,0,.3);box-shadow:1px 1px 50px rgba(0,0,0,.3)}.mask-add-task-config .mask-content .mask-main-title{height:50px;background:#4669c7;color:#fff;font-size:24px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;padding-left:20px}.mask-add-task-config .mask-content .mask-main-title span{line-height:50px;color:#fff;font-size:16px}.mask-add-task-config .mask-content .mask-main-title .close-icon{width:16px;height:16px;float:right;background:url("+s(t("bE5C"))+") no-repeat;cursor:pointer;margin:16px 15px 0 0}.mask-add-task-config .mask-content .info{height:350px;max-height:500px;margin:40px auto;padding:0 40px 20px;overflow:auto}.mask-add-task-config .mask-content .info .project-content{height:200px}.mask-add-task-config .mask-content .info .taskAddConfigViewForm{min-height:275px}.mask-add-task-config .mask-content .info .el-form-item .el-form-item__content{width:calc(100% - 230px)}.mask-add-task-config .mask-content .info .el-form-item .el-form-item__content .pre-job-key-text{display:inline-block;width:120px;height:40px;line-height:40px;border-radius:4px;margin-right:3px;background-color:#f5f7fa;border:1px solid #e4e7ed;color:#c0c4cc;padding-left:10px}.mask-add-task-config .mask-content .info .el-form-item .el-form-item__content .pre-job-key.el-input{width:calc(100% - 189px)}.mask-add-task-config .mask-content .info .el-form-item .el-form-item__content .el-date-editor.el-input,.mask-add-task-config .mask-content .info .el-form-item .el-form-item__content .el-input-number,.mask-add-task-config .mask-content .info .el-form-item .el-form-item__content .el-select{width:100%}.mask-add-task-config .mask-content .info .el-form-item__label{line-height:40px;width:165px}.mask-add-task-config .mask-content .info .button{margin-top:10px;text-align:center}.mask-add-task-config .mask-content .info .button button{min-width:140px}",""])}});